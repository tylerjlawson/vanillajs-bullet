<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <span>test foo</span>
      <span>John Doe is here</span>
      <span>This is fun</span>
      <span>Hallellujah I like apples</span>
      <span>Where's my nachos?</span>
    </div>
  </body>
  <script>
    const BULLET_WIDTH = 40;
    const container = document.querySelector(".container");

    const renderDots = ()  => {
      const spans = [...document.querySelectorAll("span")];
      const spanLengths = spans.map((span) => span.offsetWidth);
      let lines = [[]];
      let currLine = 0;
      let countWidth = 0;
      spanLengths.forEach((len, ind) => {
        countWidth += len + BULLET_WIDTH;
        const span = spans[ind];
        if (countWidth <= container.clientWidth) {
          lines[currLine].push(span);
        } else {
          countWidth = len + BULLET_WIDTH;
          currLine += 1;
          lines.push([span]);
        }
      });
      lines.forEach((line) => {
        line.forEach((span, ind) => {
          if (ind === line.length - 1) {
            span.classList.remove("has-delim");
          } else {
            line[ind].classList.add("has-delim");
          }
        });
      });
      const newHtml = lines.reduce((acc, line) => {
        const lineHtmlStrings = line.map((ele) => ele.outerHTML);
        const lineHtml =
          '<div class="row">' + lineHtmlStrings.join("") + "</div>";
        acc += lineHtml;
        return acc;
      }, "");
      container.innerHTML = newHtml;
    }

    const timeout = false, // holder for timeout id
    delay = 250;
    window.addEventListener("load", renderDots);
    window.addEventListener('resize', function() {
      // clear the timeout
      clearTimeout(timeout);
      // start timing for event "completion"
      timeout = setTimeout(renderDots, delay);
    });
  </script>
</html>
